/*
 * jQuery Tooltip plugin 1.3
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/
 * http://docs.jquery.com/Plugins/Tooltip
 *
 * Copyright (c) 2006 - 2008 JÃ¶rn Zaefferer
 *
 * $Id: jquery.tooltip.js 5741 2008-06-21 15:22:16Z joern.zaefferer $
 * 
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

(function(b){function d(a){return b.data(a,"tooltip")}function t(a){d(this).delay?h=setTimeout(p,d(this).delay):p();q=!!d(this).track;b(document.body).bind("mousemove",m);m(a)}function u(){if(!b.tooltip.blocked&&this!=e&&(this.tooltipText||d(this).bodyHandler)){e=this;n=this.tooltipText;if(d(this).bodyHandler){a.title.hide();var c=d(this).bodyHandler.call(this);c.nodeType||c.jquery?a.body.empty().append(c):a.body.html(c);a.body.show()}else if(d(this).showBody){c=n.split(d(this).showBody);a.title.html(c.shift()).show(); a.body.empty();for(var f=0,g;g=c[f];f++)0<f&&a.body.append("<br/>"),a.body.append(g);a.body.hideWhenEmpty()}else a.title.html(n).show(),a.body.hide();d(this).showURL&&b(this).url()?a.url.html(b(this).url().replace("http://","")).show():a.url.hide();a.parent.addClass(d(this).extraClass);d(this).fixPNG&&a.parent.fixPNG();t.apply(this,arguments)}}function p(){h=null;k&&b.fn.bgiframe||!d(e).fade?a.parent.show():a.parent.is(":animated")?a.parent.stop().show().fadeTo(d(e).fade,e.tOpacity):a.parent.is(":visible")? a.parent.fadeTo(d(e).fade,e.tOpacity):a.parent.fadeIn(d(e).fade);m()}function m(c){if(!(b.tooltip.blocked||c&&"OPTION"==c.target.tagName))if(!q&&a.parent.is(":visible")&&b(document.body).unbind("mousemove",m),null==e)b(document.body).unbind("mousemove",m);else{a.parent.removeClass("viewport-right").removeClass("viewport-bottom");var f=a.parent[0].offsetLeft,g=a.parent[0].offsetTop;c&&(f=c.pageX+d(e).left,g=c.pageY+d(e).top,c="auto",d(e).positionLeft&&(c=b(window).width()-f,f="auto"),a.parent.css({left:f, right:c,top:g}));c=b(window).scrollLeft();var h=b(window).scrollTop(),k=b(window).width(),n=b(window).height(),l=a.parent[0];c+k<l.offsetLeft+l.offsetWidth&&(f-=l.offsetWidth+20+d(e).left,a.parent.css({left:f+"px"}).addClass("viewport-right"));h+n<l.offsetTop+l.offsetHeight&&(g-=l.offsetHeight+20+d(e).top,a.parent.css({top:g+"px"}).addClass("viewport-bottom"))}}function r(c){function f(){a.parent.removeClass(g.extraClass).hide().css("opacity","")}if(!b.tooltip.blocked){h&&clearTimeout(h);e=null;var g= d(this);k&&b.fn.bgiframe||!g.fade?f():a.parent.is(":animated")?a.parent.stop().fadeTo(g.fade,0,f):a.parent.stop().fadeOut(g.fade,f);d(this).fixPNG&&a.parent.unfixPNG()}}var a={},e,n,h,k=navigator.userAgent.match(/msie [6]/i)&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),q=!1;b.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){b.tooltip.blocked=!b.tooltip.blocked}};b.fn.extend({tooltip:function(c){c=b.extend({},b.tooltip.defaults, c);a.parent||(a.parent=b('<div id="'+c.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),b.fn.bgiframe&&a.parent.bgiframe(),a.title=b("h3",a.parent),a.body=b("div.body",a.parent),a.url=b("div.url",a.parent));return this.each(function(){b.data(this,"tooltip",c);this.tOpacity=a.parent.css("opacity");this.tooltipText=this.title;b(this).removeAttr("title");this.alt=""}).mouseover(u).mouseout(r).click(r)},fixPNG:k?function(){return this.each(function(){var a= b(this).css("backgroundImage");a.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(a=RegExp.$1,b(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+a+"')"}).each(function(){var a=b(this).css("position");"absolute"!=a&&"relative"!=a&&b(this).css("position","relative")}))})}:function(){return this},unfixPNG:k?function(){return this.each(function(){b(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){b(this)[b(this).html()? "show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})})(jQuery);